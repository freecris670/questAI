-- Обновляем планы чтобы features содержал как объект с настройками, так и массив описаний для фронтенда
UPDATE plans SET features = jsonb_set(
  features,
  '{descriptions}',
  CASE 
    WHEN name = 'Базовый' THEN '["Базовые квесты", "Ограниченная поддержка", "3 квеста в день"]'::jsonb
    WHEN name = 'Стандарт' THEN '["Расширенные квесты", "Интеграция с календарем", "Email уведомления", "10 квестов в день"]'::jsonb
    WHEN name = 'Премиум' THEN '["Неограниченные квесты", "Приоритетная генерация", "API доступ", "Кастомные темы"]'::jsonb
    WHEN name = 'Команда' THEN '["Все функции Премиум", "Командные функции", "Выделенная поддержка 24/7", "Кастомные интеграции"]'::jsonb
    ELSE '[]'::jsonb
  END
) WHERE name IN ('Базовый', 'Стандарт', 'Премиум', 'Команда');
